#
# Copyright 2008, IM Kit Team.
# Distributed under the terms of the MIT License.
#
# Authors:
#		Pier Luigi Fiorini <pierluigi.fiorini@gmail.com>
#

SubDir IMKIT_TOP protocols OSCAR ;

HDRS += [ FDirName $(IMKIT_TOP) ] ;
HDRS += [ FDirName $(IMKIT_OPENSSL_INCDIR) ] ;

SEARCH_SOURCE += [ FDirName $(IMKIT_TOP) common ] ;

Addon oscar :
	AIM.cpp
	FLAP.cpp
	TLV.cpp
	OSCARManager.cpp
	SNAC.cpp
	OSCARConnection.cpp
	OSCARBOSConnection.cpp
	OSCARReqConn.cpp
	Buddy.cpp
	Group.cpp
	BufferWriter.cpp
	: be stdc++.r4 textencoding im libcommon.a ssl crypto
	: OSCAR.rdef
;

if $(IMKIT_IS_HAIKU)  = 1 {
	LINKFLAGS on oscar += -lnetwork ;
}

if $(IMKIT_IS_BEOS) = 1 {
	LINKFLAGS on oscar += -lsocket ;
}

if $(IMKIT_IS_ZETA) = 1 {
	LINKFLAGS on oscar += -lsocket -lbind ;
	SubDirHdrs /boot/develop/headers/be/bone ;
}

LINKFLAGS on oscar += -L$(IMKIT_OPENSSL_LIBDIR) -L$(IMKIT_TOP)/libim $(IMKIT_TOP)/server/im_server ;

InstallLib $(IMKIT_COMMON_ADDONS_DIRECTORY)/imkit : oscar ;
